<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MandEval Vaccine Mandate Decision Aid</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.ico">
</head>
<body>
<header class="app-header">
    <div class="app-header__title">
        <h1>MandEval Vaccine Mandate Decision Aid</h1>
        <p>Use survey-based preference evidence to compare mandate policy options</p>
    </div>
    <div class="app-header__controls">
        <div class="control-group">
            <label for="country-select">Country</label>
            <select id="country-select" class="control-select">
                <!-- populated by JS -->
            </select>
        </div>
        <div class="control-group">
            <label for="scenario-select">Outbreak scenario</label>
            <select id="scenario-select" class="control-select">
                <!-- populated by JS -->
            </select>
        </div>
    </div>
</header>

<nav class="tab-nav">
    <button class="tab-button active" data-tab-target="#tab-overview">Overview</button>
    <button class="tab-button" data-tab-target="#tab-policy">Policy builder</button>
    <button class="tab-button" data-tab-target="#tab-results">Impact & support</button>
    <button class="tab-button" data-tab-target="#tab-equivalence">Trade-offs</button>
    <button class="tab-button" data-tab-target="#tab-about">Methods</button>
</nav>

<main class="app-main">
    <!-- OVERVIEW TAB -->
    <section id="tab-overview" class="tab-panel active">
        <div class="card-grid">
            <section class="card card--wide">
                <h2>What this tool does</h2>
                <p>
                    This decision aid uses discrete choice experiment (DCE) estimates from representative surveys
                    in Australia, Italy and France. It translates preferences into predicted public support for
                    different vaccine mandate configurations under mild or severe outbreak scenarios.
                </p>
                <p>
                    Start by selecting a country and outbreak scenario at the top. Then use the
                    <strong>Policy builder</strong> tab to choose mandate characteristics. The
                    <strong>Impact &amp; support</strong> tab shows predicted support for your policy, while the
                    <strong>Trade-offs</strong> tab expresses how much additional effectiveness (lives saved) is
                    required to offset stricter or more permissive design choices.
                </p>
            </section>

            <section class="card">
                <h3>Sample profile (summary)</h3>
                <dl class="definition-list" id="sample-profile">
                    <!-- populated by JS -->
                </dl>
            </section>

            <section class="card">
                <h3>Model diagnostics</h3>
                <dl class="definition-list" id="model-diagnostics">
                    <!-- populated by JS -->
                </dl>
            </section>
        </div>
    </section>

    <!-- POLICY BUILDER TAB -->
    <section id="tab-policy" class="tab-panel">
        <div class="card-grid">
            <section class="card card--wide">
                <h2>Configure a vaccine mandate policy</h2>
                <p>Choose the scope, exemption rules, coverage target, and expected impact on lives saved.</p>

                <div class="policy-form">
                    <div class="policy-field">
                        <label for="scope-select">Scope of mandate</label>
                        <select id="scope-select">
                            <!-- options populated by JS -->
                        </select>
                        <p class="help-text" id="scope-help">
                            Applies the mandate only to clearly defined high-risk groups or extends it more broadly.
                        </p>
                    </div>

                    <div class="policy-field">
                        <label for="exemptions-select">Exemption policy</label>
                        <select id="exemptions-select">
                            <!-- options populated by JS -->
                        </select>
                        <p class="help-text" id="exemptions-help">
                            Determines who can opt out of vaccination (medical only, medical and religious, or
                            additional personal choice exemptions).
                        </p>
                    </div>

                    <div class="policy-field">
                        <label for="coverage-select">Coverage threshold to lift mandate</label>
                        <select id="coverage-select">
                            <!-- options populated by JS -->
                        </select>
                        <p class="help-text" id="coverage-help">
                            Specifies the vaccination coverage level at which the mandate would be lifted.
                        </p>
                    </div>

                    <div class="policy-field">
                        <label for="lives-saved-range">
                            Expected lives saved per 100&nbsp;000 people
                            <span class="badge" id="lives-saved-label">10</span>
                        </label>
                        <input id="lives-saved-range"
                               type="range"
                               min="10"
                               max="40"
                               step="5"
                               value="10">
                        <p class="help-text">
                            Approximate mortality benefit under the chosen policy and outbreak scenario.
                            This control scales the DCE coefficient for expected lives saved.
                        </p>
                    </div>
                </div>
            </section>

            <section class="card">
                <h3>Current policy summary</h3>
                <ul class="summary-list" id="policy-summary">
                    <!-- populated by JS -->
                </ul>
            </section>
        </div>
    </section>

    <!-- RESULTS TAB -->
    <section id="tab-results" class="tab-panel">
        <div class="card-grid">
            <section class="card card--wide">
                <h2>Predicted public support</h2>
                <p>
                    Based on the selected country, outbreak scenario and policy configuration, the chart below
                    shows the predicted share of respondents who would prefer your mandate policy relative to
                    an alternative mandate and a “no mandate” opt-out option.
                </p>

                <div class="chart-container">
                    <canvas id="uptake-chart" aria-label="Predicted support chart"></canvas>
                </div>
            </section>

            <section class="card">
                <h3>Key indicators</h3>
                <dl class="definition-list" id="uptake-indicators">
                    <!-- populated by JS -->
                </dl>
            </section>
        </div>
    </section>

    <!-- TRADE-OFFS TAB -->
    <section id="tab-equivalence" class="tab-panel">
        <div class="card-grid">
            <section class="card card--wide">
                <h2>Lives-saved equivalence for mandate features</h2>
                <p>
                    These values show how many additional lives per 100&nbsp;000 would need to be saved to offset
                    less preferred mandate designs, holding other features constant. They are derived from
                    willingness-to-trade estimates in the DCE.
                </p>

                <table class="table" id="equivalence-table">
                    <thead>
                    <tr>
                        <th>Attribute change</th>
                        <th>Additional lives saved<br>(per 100&nbsp;000)</th>
                        <th>95% CI width (approximate)</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- populated by JS -->
                    </tbody>
                </table>
            </section>
        </div>
    </section>

    <!-- ABOUT TAB -->
    <section id="tab-about" class="tab-panel">
        <div class="card-grid">
            <section class="card card--wide">
                <h2>Methods</h2>
                <p>
                    Estimates are based on country-specific mixed logit models in preference space, using
                    representative online samples of adults in Australia, Italy and France. The design was
                    a labelled discrete choice experiment contrasting alternative vaccine mandate policies
                    and an explicit opt-out option. Attributes included mandate scope, exemption rules,
                    coverage thresholds for lifting the mandate, and expected lives saved per 100&nbsp;000 people.
                </p>
                <p>
                    For this tool, the utility of a policy resembling “Policy&nbsp;A” is computed as the sum of:
                </p>
                <ul class="bullet-list">
                    <li>an alternative-specific constant for Policy&nbsp;A,</li>
                    <li>the coefficients associated with the selected mandate scope, exemptions and coverage, and</li>
                    <li>a scaled coefficient for expected lives saved (per 10 lives saved).</li>
                </ul>
                <p>
                    The opt-out option uses its estimated constant, while the comparator mandate is treated as
                    a baseline alternative with utility normalised to zero. Predicted support shares are then
                    derived from a standard multinomial logit formula with three alternatives.
                </p>
            </section>
        </div>
    </section>
</main>

<footer class="app-footer">
    <p>MandEval Vaccine Mandate DCE &middot; Prototype decision-support interface</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="app.js"></script>
</body>
</html>
