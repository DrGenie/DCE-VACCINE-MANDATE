<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vaccine Mandate Policy Decision-Aid Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<header class="top-nav">
  <div class="brand">
    <h1>Vaccine Mandate Policy Decision-Aid</h1>
    <p class="subtitle">Integrating DCE-based uptake, epidemiology and economic evaluation</p>
  </div>
  <div class="nav-controls">
    <div class="control">
      <label for="country-select">Country</label>
      <select id="country-select">
        <option value="AU">Australia</option>
        <option value="IT">Italy</option>
        <option value="FR">France</option>
      </select>
    </div>
    <div class="control">
      <label for="scenario-select">Outbreak context</label>
      <select id="scenario-select">
        <option value="mild">Mild outbreak</option>
        <option value="severe">Severe outbreak</option>
      </select>
    </div>
    <div class="control">
      <label for="population-input">Population N</label>
      <input id="population-input" type="number" min="1000" step="1000" />
    </div>
    <div class="control">
      <label for="baseline-uptake">Baseline uptake p₀ (%)</label>
      <input id="baseline-uptake" type="number" min="0" max="100" step="1" />
    </div>
    <button id="export-brief-btn" class="primary-btn">Export policy brief (PDF)</button>
  </div>
</header>

<main class="app-shell">
  <!-- DESCRIPTIVES -->
  <section id="descriptives-panel" class="card full-width">
    <div class="card-header">
      <h2>Population &amp; sample profile</h2>
      <div class="chip-row">
        <button class="chip chip-active" data-desc-toggle="country">By country</button>
        <button class="chip" data-desc-toggle="scenario">By outbreak context</button>
        <button class="chip" data-desc-toggle="class">By latent class</button>
      </div>
    </div>
    <div id="descriptives-table" class="descriptives-table">
      <!-- Filled by script.js; placeholder text shown if no data -->
      <p class="muted small">
        Descriptive statistics will appear here (age, gender, education, income, vaccine attitudes, trust, political
        orientation, etc.). Populate <code>DESCRIPTIVES</code> in <code>script.js</code> with your empirical
        summary statistics.
      </p>
    </div>
  </section>

  <div class="grid-2">
    <!-- MANDATE CONFIG -->
    <section id="config-panel" class="card">
      <div class="card-header">
        <h2>Mandate configuration</h2>
        <p class="muted small">Select the design attributes of the vaccine mandate.</p>
      </div>

      <form id="mandate-form">
        <fieldset class="attribute-group">
          <legend>Scope of mandate</legend>
          <p class="attr-description">Who would be required to get vaccinated?</p>
          <label class="radio-card">
            <input type="radio" name="scope" value="high_risk" checked />
            <div>
              <span class="radio-title">High-risk occupations only</span>
              <span class="radio-subtitle">
                Vaccination is required only for people in jobs with high exposure risk or essential public roles (e.g.,
                healthcare workers, emergency responders).
              </span>
            </div>
          </label>
          <label class="radio-card">
            <input type="radio" name="scope" value="all_public" />
            <div>
              <span class="radio-title">All occupations &amp; public spaces</span>
              <span class="radio-subtitle">
                Everyone working or entering public venues (e.g., cinemas, malls, restaurants, public transport) must be
                vaccinated.
              </span>
            </div>
          </label>
        </fieldset>

        <fieldset class="attribute-group">
          <legend>Exemption policy</legend>
          <p class="attr-description">Who would be allowed to opt out of the mandate?</p>
          <label class="radio-card">
            <input type="radio" name="exemptions" value="medical_only" checked />
            <div>
              <span class="radio-title">Medical only</span>
              <span class="radio-subtitle">
                Only those with certified medical reasons (e.g., serious allergies) can opt out of vaccination.
              </span>
            </div>
          </label>
          <label class="radio-card">
            <input type="radio" name="exemptions" value="medical_religious" />
            <div>
              <span class="radio-title">Medical + religious</span>
              <span class="radio-subtitle">
                Exemptions allowed for medical reasons or documented religious beliefs (verification required).
              </span>
            </div>
          </label>
          <label class="radio-card">
            <input type="radio" name="exemptions" value="medical_religious_personal" />
            <div>
              <span class="radio-title">Medical + religious + personal belief</span>
              <span class="radio-subtitle">
                Exemptions allowed for medical reasons, religious beliefs, or strong personal objections (broader
                opt-out).
              </span>
            </div>
          </label>
        </fieldset>

        <fieldset class="attribute-group">
          <legend>Coverage requirement to lift mandate</legend>
          <p class="attr-description">When can the vaccine mandate be lifted?</p>
          <label class="radio-card">
            <input type="radio" name="coverage" value="cov50" />
            <div>
              <span class="radio-title">50% population vaccinated</span>
              <span class="radio-subtitle">
                Mandate lifted once 50% of the population is vaccinated (low threshold).
              </span>
            </div>
          </label>
          <label class="radio-card">
            <input type="radio" name="coverage" value="cov70" checked />
            <div>
              <span class="radio-title">70% population vaccinated</span>
              <span class="radio-subtitle">
                Mandate lifted once 70% of the population is vaccinated (most people vaccinated; near-normal life can
                resume).
              </span>
            </div>
          </label>
          <label class="radio-card">
            <input type="radio" name="coverage" value="cov90" />
            <div>
              <span class="radio-title">90% population vaccinated</span>
              <span class="radio-subtitle">
                Mandate lifted once 90% of the population is vaccinated (almost everyone vaccinated; safe to remove all
                mandates).
              </span>
            </div>
          </label>
        </fieldset>

        <fieldset class="attribute-group">
          <legend>Expected lives saved</legend>
          <p class="attr-description">How many lives per 100,000 would be saved by introducing this mandate?</p>
          <div class="slider-row">
            <input
              id="lives-saved-slider"
              type="range"
              min="10"
              max="40"
              step="5"
              value="25"
            />
            <span id="lives-saved-value" class="slider-value">25</span>
            <span class="small muted">lives per 100,000</span>
          </div>
        </fieldset>
      </form>
    </section>

    <!-- UPTAKE -->
    <section id="uptake-panel" class="card">
      <div class="card-header">
        <h2>Predicted uptake</h2>
        <p class="muted small">
          DCE-based uptake combining mixed logit and latent-class models, by country and outbreak context.
        </p>
      </div>
      <div class="uptake-summary">
        <div class="uptake-number">
          <span class="label">Baseline uptake p₀</span>
          <span id="uptake-baseline" class="value">–</span>
        </div>
        <div class="uptake-number">
          <span class="label">Mandate uptake (composite)</span>
          <span id="uptake-composite" class="value">–</span>
        </div>
        <div class="uptake-number">
          <span class="label">Δ vaccinated (N × (p<sub>m</sub> − p₀))</span>
          <span id="uptake-deltaV" class="value">–</span>
        </div>
      </div>
      <div class="uptake-classes">
        <div class="uptake-number small-number">
          <span class="label">Mandate supporters – uptake</span>
          <span id="uptake-supporters" class="value">–</span>
        </div>
        <div class="uptake-number small-number">
          <span class="label">Mandate resisters – uptake</span>
          <span id="uptake-resisters" class="value">–</span>
        </div>
      </div>
      <div class="chart-wrapper">
        <canvas id="uptakeChart"></canvas>
      </div>
    </section>
  </div>

  <div class="grid-2">
    <!-- BENEFITS -->
    <section id="benefits-panel" class="card">
      <div class="card-header">
        <h2>Benefit metrics</h2>
        <p class="muted small">
          Evaluate additional vaccinated, cases averted, QALYs gained, DALYs averted and monetised benefits.
        </p>
      </div>
      <div class="benefit-controls">
        <label>
          Vaccine effectiveness VE (%)
          <input id="ve-slider" type="range" min="30" max="95" step="1" value="80" />
          <span id="ve-value" class="slider-value">80%</span>
        </label>
        <label>
          Attack rate over horizon (% of population)
          <input id="attack-rate" type="range" min="5" max="60" step="1" value="20" />
          <span id="attack-rate-value" class="slider-value">20%</span>
        </label>
        <label>
          Infection-fatality risk (IFR, %)
          <input id="ifr-slider" type="range" min="0.05" max="2" step="0.05" value="0.5" />
          <span id="ifr-value" class="slider-value">0.5%</span>
        </label>
      </div>
      <div class="benefit-summary">
        <div class="metric">
          <span class="label">Δ vaccinated (ΔV)</span>
          <span id="benefit-deltaV" class="value">–</span>
        </div>
        <div class="metric">
          <span class="label">Cases averted</span>
          <span id="benefit-cases" class="value">–</span>
        </div>
        <div class="metric">
          <span class="label">Hospitalisations averted</span>
          <span id="benefit-hosp" class="value">–</span>
        </div>
        <div class="metric">
          <span class="label">Deaths averted</span>
          <span id="benefit-deaths" class="value">–</span>
        </div>
        <div class="metric">
          <span class="label">QALYs gained</span>
          <span id="benefit-qalys" class="value">–</span>
        </div>
        <div class="metric">
          <span class="label">DALYs averted</span>
          <span id="benefit-dalys" class="value">–</span>
        </div>
        <div class="metric wide">
          <span class="label">Monetised benefits</span>
          <span id="benefit-monetised" class="value">–</span>
        </div>
      </div>
      <div class="chart-wrapper">
        <canvas id="benefitsChart"></canvas>
      </div>
    </section>

    <!-- COSTS -->
    <section id="costs-panel" class="card">
      <div class="card-header">
        <h2>Cost catalogue</h2>
        <p class="muted small">
          Include or exclude public-sector, employer and vaccination programme costs. All values in local currency.
        </p>
      </div>

      <div class="cost-groups">
        <div class="cost-group">
          <h3>Public-sector costs</h3>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="policy_drafting" checked />
            <span>Mandate policy drafting &amp; legal preparation</span>
            <input type="number" class="cost-input" data-cost-id="policy_drafting" />
          </label>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="communications" checked />
            <span>Communications &amp; public information campaigns</span>
            <input type="number" class="cost-input" data-cost-id="communications" />
          </label>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="it_systems" checked />
            <span>IT systems / vaccine certificate infrastructure</span>
            <input type="number" class="cost-input" data-cost-id="it_systems" />
          </label>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="enforcement" />
            <span>Enforcement, inspections, exemption processing</span>
            <input type="number" class="cost-input" data-cost-id="enforcement" />
          </label>
        </div>

        <div class="cost-group">
          <h3>Employer-side costs</h3>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="hr_implementation" checked />
            <span>Management / HR implementation time</span>
            <input type="number" class="cost-input" data-cost-id="hr_implementation" />
          </label>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="paid_time_vax" />
            <span>Paid time off for vaccination</span>
            <input type="number" class="cost-input" data-cost-id="paid_time_vax" />
          </label>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="testing_costs" />
            <span>Testing costs (if test-or-vaccinate)</span>
            <input type="number" class="cost-input" data-cost-id="testing_costs" />
          </label>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="attrition" />
            <span>Staff attrition &amp; replacement hiring</span>
            <input type="number" class="cost-input" data-cost-id="attrition" />
          </label>
        </div>

        <div class="cost-group">
          <h3>Vaccination programme costs</h3>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="vaccine_procurement" checked />
            <span>Vaccine procurement &amp; cold chain</span>
            <input type="number" class="cost-input" data-cost-id="vaccine_procurement" />
          </label>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="delivery" checked />
            <span>Delivery (clinics, mobile teams, logistics)</span>
            <input type="number" class="cost-input" data-cost-id="delivery" />
          </label>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="training_supervision" />
            <span>Training, supervision &amp; monitoring</span>
            <input type="number" class="cost-input" data-cost-id="training_supervision" />
          </label>
        </div>

        <div class="cost-group">
          <h3>Social / political costs (scenario-based)</h3>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="trust_erosion" />
            <span>Trust erosion, polarisation, protests (proxy valuation)</span>
            <input type="number" class="cost-input" data-cost-id="trust_erosion" />
          </label>
          <label class="cost-item">
            <input type="checkbox" class="cost-toggle" data-cost-id="unmet_care" />
            <span>Unmet care due to workforce attrition</span>
            <input type="number" class="cost-input" data-cost-id="unmet_care" />
          </label>
        </div>
      </div>

      <div class="cost-summary">
        <div class="metric wide">
          <span class="label">Total programme cost</span>
          <span id="total-cost" class="value">–</span>
        </div>
      </div>
    </section>
  </div>

  <div class="grid-2" id="policy-brief-root">
    <!-- ECON EVALUATION -->
    <section id="evaluation-panel" class="card">
      <div class="card-header">
        <h2>Economic evaluation</h2>
        <p class="muted small">
          Cost-benefit analysis (CBA), cost-effectiveness (CEA) and net monetary benefit (NMB).
        </p>
      </div>
      <div class="eval-controls">
        <label>
          Discount rate (%)
          <input id="discount-rate" type="range" min="0" max="10" step="0.5" value="3" />
          <span id="discount-rate-value" class="slider-value">3%</span>
        </label>
        <label>
          WTP threshold per QALY
          <input id="wtp-qaly" type="number" />
        </label>
        <label>
          Value of a statistical life (VSL)
          <input id="vsl-input" type="number" />
        </label>
      </div>

      <div class="eval-summary">
        <div class="metric">
          <span class="label">Net present value (NPV)</span>
          <span id="eval-npv" class="value">–</span>
        </div>
        <div class="metric">
          <span class="label">Benefit–cost ratio</span>
          <span id="eval-bcr" class="value">–</span>
        </div>
        <div class="metric">
          <span class="label">Cost per QALY gained</span>
          <span id="eval-icER-qaly" class="value">–</span>
        </div>
        <div class="metric">
          <span class="label">Cost per additional vaccinated</span>
          <span id="eval-cost-per-vaccinated" class="value">–</span>
        </div>
        <div class="metric wide">
          <span class="label">Net monetary benefit (equally-weighted)</span>
          <span id="eval-nmb" class="value">–</span>
        </div>
      </div>
    </section>

    <!-- EQUITY -->
    <section id="equity-panel" class="card">
      <div class="card-header">
        <h2>Equity analysis</h2>
        <p class="muted small">
          Allocate benefits across subgroups, apply equity weights and compute equity-adjusted NMB.
        </p>
      </div>
      <div class="equity-controls">
        <table class="equity-table">
          <thead>
            <tr>
              <th>Group</th>
              <th>Share of population (%)</th>
              <th>Relative equity weight</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Low SES / high-risk</td>
              <td><input type="number" id="eq-share-1" min="0" max="100" value="30" /></td>
              <td><input type="number" id="eq-weight-1" min="0" step="0.1" value="1.3" /></td>
            </tr>
            <tr>
              <td>Middle SES</td>
              <td><input type="number" id="eq-share-2" min="0" max="100" value="40" /></td>
              <td><input type="number" id="eq-weight-2" min="0" step="0.1" value="1.0" /></td>
            </tr>
            <tr>
              <td>High SES / low-risk</td>
              <td><input type="number" id="eq-share-3" min="0" max="100" value="30" /></td>
              <td><input type="number" id="eq-weight-3" min="0" step="0.1" value="0.7" /></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="equity-summary">
        <div class="metric">
          <span class="label">Equity-weighted QALYs</span>
          <span id="equity-qalys" class="value">–</span>
        </div>
        <div class="metric">
          <span class="label">Equity-adjusted NMB</span>
          <span id="equity-nmb" class="value">–</span>
        </div>
      </div>
      <div class="chart-wrapper">
        <canvas id="equityChart"></canvas>
      </div>
    </section>
  </div>

  <!-- SENSITIVITY -->
  <section id="sensitivity-panel" class="card full-width">
    <div class="card-header">
      <h2>Sensitivity &amp; robustness</h2>
      <p class="muted small">
        Deterministic sliders and probabilistic sensitivity analysis with CEAC and tornado plots.
      </p>
    </div>
    <div class="sensitivity-controls">
      <label>
        SD of programme cost (for PSA)
        <input id="psa-cost-sd" type="number" />
      </label>
      <label>
        SD of QALYs gained (for PSA)
        <input id="psa-qaly-sd" type="number" />
      </label>
      <button id="run-psa-btn" class="secondary-btn">Run probabilistic sensitivity (1,000 sims)</button>
    </div>
    <div class="grid-2">
      <div class="chart-wrapper">
        <h3 class="chart-title">Key drivers (tornado diagram)</h3>
        <canvas id="tornadoChart"></canvas>
      </div>
      <div class="chart-wrapper">
        <h3 class="chart-title">Cost-effectiveness acceptability curve (CEAC)</h3>
        <canvas id="ceacChart"></canvas>
      </div>
    </div>
  </section>

  <!-- METHODS / DOCUMENTATION -->
  <section id="methods-panel" class="card full-width">
    <div class="card-header">
      <h2>Methods &amp; documentation</h2>
    </div>
    <div class="methods-body">
      <p>
        This decision-aid links discrete choice experiment (DCE) results from Australia, France and Italy to
        epidemiological and economic models. Mixed logit and latent-class logit models are used to generate mandate
        uptake probabilities for any combination of scope, exemption policy, coverage thresholds and expected lives
        saved under mild and severe outbreak vignettes. Predicted uptake feeds into static attack-rate models and
        long-COVID extensions to estimate cases, hospitalisations, intensive-care admissions and deaths averted.
      </p>
      <p>
        Health outcomes are translated into QALYs gained and DALYs averted using user-specified parameters on mortality
        and morbidity burden. Monetised benefits combine direct medical costs avoided, productivity gains and
        VSL/VSLY-based valuations of mortality risk reductions. The cost catalogue covers public-sector implementation,
        employer compliance and vaccination-programme costs, with options to include social and political costs in
        scenario analyses.
      </p>
      <p>
        Net present value, benefit–cost ratios, incremental cost-effectiveness ratios and net monetary benefit are
        computed for each mandate design. Equity modules allocate QALY gains across user-defined subgroups and apply
        equity weights to derive equity-adjusted NMB. Deterministic sensitivity analysis is implemented via sliders, and
        probabilistic sensitivity analysis allows Monte Carlo simulation of uncertain parameters with graphical
        summaries.
      </p>
    </div>
  </section>
</main>

<footer class="footer">
  <span>&copy; Vaccine Mandate Decision-Aid Tool</span>
  <span class="muted small">Prototype for research and policy analysis – not a clinical decision device.</span>
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="script.js"></script>
</body>
</html>
